{"version":3,"sources":["../../src/validation.ts"],"sourcesContent":["import { assertIsSnapIcon } from './icon';\nimport { validateSnapManifestLocalizations } from './localization';\nimport { assertIsSnapManifest } from './manifest/validation';\nimport { validateSnapShasum } from './snaps';\nimport type { FetchedSnapFiles } from './types';\n\n/**\n * Validates the files contained in a fetched snap.\n *\n * @param files - All potentially included files in a fetched snap.\n * @throws If any of the files are considered invalid.\n */\nexport async function validateFetchedSnap(\n  files: FetchedSnapFiles,\n): Promise<void> {\n  assertIsSnapManifest(files.manifest.result);\n  await validateSnapShasum(files);\n  validateSnapManifestLocalizations(\n    files.manifest.result,\n    files.localizationFiles.map((file) => file.result),\n  );\n\n  if (files.svgIcon) {\n    assertIsSnapIcon(files.svgIcon);\n  }\n}\n"],"names":["assertIsSnapIcon","validateSnapManifestLocalizations","assertIsSnapManifest","validateSnapShasum","validateFetchedSnap","files","manifest","result","localizationFiles","map","file","svgIcon"],"mappings":"AAAA,SAASA,gBAAgB,QAAQ,SAAS;AAC1C,SAASC,iCAAiC,QAAQ,iBAAiB;AACnE,SAASC,oBAAoB,QAAQ,wBAAwB;AAC7D,SAASC,kBAAkB,QAAQ,UAAU;AAG7C;;;;;CAKC,GACD,OAAO,eAAeC,oBACpBC,KAAuB;IAEvBH,qBAAqBG,MAAMC,QAAQ,CAACC,MAAM;IAC1C,MAAMJ,mBAAmBE;IACzBJ,kCACEI,MAAMC,QAAQ,CAACC,MAAM,EACrBF,MAAMG,iBAAiB,CAACC,GAAG,CAAC,CAACC,OAASA,KAAKH,MAAM;IAGnD,IAAIF,MAAMM,OAAO,EAAE;QACjBX,iBAAiBK,MAAMM,OAAO;IAChC;AACF"}